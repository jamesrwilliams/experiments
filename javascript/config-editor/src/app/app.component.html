<div class="jumbotron text-center">
  <h1>Bulk Change JSON Properties</h1>
</div>
<div class="container-fluid">
  <form [formGroup]="inputFiles">
    <label for="file">Select a local config json file.</label>
    <input class="form-control" type="file" id="file" (change)="onFileChange($event)" placeholder="Search" aria-label="Search">
  </form>
</div>
<div class="container-fluid" [hidden]="!config">
  <div class="row">
    <div class="col">
      <label for="original">Configuration</label>
      <textarea class="form-control text-monospace text-small" id="original" cols="30" rows="10" readonly>{{ original | json }}</textarea>
    </div>
  </div>
  <br>
<form [formGroup]="nodeList">
  <table id="jsonTable" class="table table-sm">
    <tbody class="table-hover" formArrayName="nodes" *ngFor="let node of nodeList.get('nodes').controls; let i = index">
      <tr [formGroupName]="i">
        <td>
          #{{ i + 1 }}
        </td>
        <td>
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label for="key">Node Key</label>
                <input type="text" id="key" (change)="getPreview(node, i)" class="form-control text-monospace" formControlName="key" placeholder="iframe.translations.en-US" />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label for="currentValue">Current Value of node:</label>
                <textarea class="form-control text-small text-monospace" formControlName="current" readonly id="currentValue"></textarea>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="value">New Value</label>
                <textarea class="form-control text-small text-monospace" type="text" id="value" formControlName="value" placeholder="Value"></textarea>
              </div>
            </div>
          </div>
          <button class="btn btn-sm btn-danger" (click)="removeNode(i)">Remove</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button class="btn btn-primary" (click)="addNode()">Add Change</button>
  <button class="btn btn-success float-right" type="submit" (click)="processNewJSON()" [disabled]="!nodeList.valid && !nodeList.touched">Process</button>
</form>
  <textarea class="form-control text-monospace text-small" [hidden]="!output" readonly cols="30" rows="10">{{ output | json }}</textarea>
</div>







